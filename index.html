<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Roadmap</title>

  <style>
    :root{
      --bg:#0b1020;
      --text:#e8ecff;
      --muted:#b9c2ff;
      --border:rgba(255,255,255,0.12);
      --shadow: 0 18px 45px rgba(0,0,0,0.35);
      --ring: 0 0 0 3px rgba(122,162,255,0.35);

      --coin1:#ffe07a;
      --coin2:#ffb800;

      --locked1:#cfd3df;
      --locked2:#9aa3b8;

      --accent:#7aa2ff;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: var(--sans);
      color: var(--text);
      background:
        radial-gradient(1100px 720px at 20% 0%, rgba(122,162,255,0.18), transparent 60%),
        radial-gradient(900px 700px at 85% 10%, rgba(255,184,0,0.10), transparent 55%),
        radial-gradient(900px 700px at 40% 95%, rgba(185,194,255,0.10), transparent 55%),
        var(--bg);
      overflow-x:hidden;
    }

    .wrap{ max-width: 980px; margin: 0 auto; padding: 26px 16px 60px; }

    header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      margin-bottom: 14px;
    }
    h1{ margin:0; font-size: clamp(22px, 2.6vw, 34px); line-height:1.15; }
    .subtitle{ margin-top:6px; color: var(--muted); font-size: 14px; max-width: 75ch; }

    .topbar{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .btn{
      cursor:pointer;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.05);
      color: var(--muted);
      padding: 9px 12px;
      border-radius: 12px;
      font-weight: 720;
      transition: transform .12s ease, background .12s ease, border-color .12s ease, color .12s ease;
      box-shadow: 0 12px 35px rgba(0,0,0,0.25);
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,0.07);
      border-color: rgba(255,255,255,0.22);
      color: var(--text);
    }
    .btn:active{ transform: translateY(0px) scale(0.99); }
    .btn:focus{ outline:none; box-shadow: var(--shadow), var(--ring); }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      border: 1px solid var(--border);
      border-radius: 18px;
      padding: 14px;
      box-shadow: var(--shadow);
    }

    .controls{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:space-between;
      margin: 14px 0 16px;
    }

    .input{
      flex: 1 1 320px;
      min-width: 240px;
      display:flex;
      gap:10px;
      align-items:center;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(10,15,31,0.55);
    }
    .input input{
      width:100%;
      border:0;
      outline:none;
      background: transparent;
      color: var(--text);
      font-size: 14px;
    }
    .input input::placeholder{ color: rgba(185,194,255,0.55); }

    /* Sections */
    .section{
      margin-top: 14px;
      border: 1px solid rgba(255,255,255,0.10);
      border-radius: 18px;
      overflow:hidden;
      background: rgba(255,255,255,0.02);
    }
    .sectionHead{
      padding: 12px 14px;
      border-bottom: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.02);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .sectionHead h2{ margin:0; font-size: 14.5px; letter-spacing:.2px; }

    .lockTag{
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.25);
      background: rgba(255,211,122,0.08);
      color: #ffd37a;
      user-select:none;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }

    /* Road list */
    .road{
      position: relative;
      padding: 14px;
    }

    /* Vertical dotted path line behind icons */
    .road::before{
      content:"";
      position:absolute;
      left: 34px;
      top: 18px;
      bottom: 18px;
      width: 2px;
      background:
        repeating-linear-gradient(
          to bottom,
          rgba(255,255,255,0.22),
          rgba(255,255,255,0.22) 5px,
          transparent 5px,
          transparent 12px
        );
      opacity: 0.55;
      pointer-events:none;
    }

    .row{
      display:flex;
      gap: 14px;
      align-items:center;
      padding: 10px 4px;
      position: relative;
    }

    .node{
      flex: 0 0 auto;
      width: 60px;
      height: 60px;
      border-radius: 999px;
      display:grid;
      place-items:center;
      border: 1px solid rgba(255,255,255,0.16);
      box-shadow: 0 16px 40px rgba(0,0,0,0.30);
      position: relative;
      z-index: 1;
      transition: transform .12s ease;
      color: rgba(70,40,0,0.95);
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.25), transparent 55%),
                  linear-gradient(180deg, var(--coin1), var(--coin2));
    }

    .row:hover .node{ transform: translateY(-1px); }

    .node svg{ width: 26px; height: 26px; }

    .node.locked{
      color: rgba(20,24,38,0.95);
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.18), transparent 55%),
                  linear-gradient(180deg, var(--locked1), var(--locked2));
    }

    .content{
      flex: 1 1 auto;
      min-width: 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.12);
      background: rgba(15,22,48,0.55);
      box-shadow: 0 14px 40px rgba(0,0,0,0.22);
      text-decoration:none;
      color: inherit;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .content:hover{
      transform: translateY(-1px);
      border-color: rgba(122,162,255,0.35);
      background: rgba(18,26,51,0.68);
    }
    .content:focus{ outline:none; box-shadow: 0 14px 40px rgba(0,0,0,0.22), var(--ring); }

    .left{ min-width:0; }
    .title{
      margin:0;
      font-weight: 860;
      font-size: 14.5px;
      line-height:1.2;
    }
    .desc{
      margin-top: 5px;
      color: var(--muted);
      font-size: 12.8px;
      overflow:hidden;
      text-overflow:ellipsis;
      white-space:nowrap;
      max-width: 80ch;
    }

    .right{
      flex: 0 0 auto;
      display:flex;
      gap: 10px;
      align-items:center;
      color: var(--muted);
      font-size: 12.5px;
      white-space:nowrap;
    }

    .chev{
      width: 18px;
      height: 18px;
      opacity: 0.9;
    }

    /* Disabled when section locked */
    .content.disabled{
      cursor: not-allowed;
      opacity: 0.68;
    }
    .content.disabled:hover{
      transform: none;
      border-color: rgba(255,255,255,0.12);
      background: rgba(15,22,48,0.55);
    }

    footer{
      margin-top: 18px;
      color: var(--muted);
      font-size: 13px;
      display:flex;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .mono{ font-family: var(--mono); }

    /* Small screens: keep it comfy */
    @media (max-width: 460px){
      .road::before{ left: 30px; }
      .node{ width: 54px; height: 54px; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div>
        <h1>Roadmap</h1>
      </div>

      <div class="topbar">
        <button class="btn" id="btnClearUnlocks" type="button" title="Forget unlocked sections on this device">
          Clear unlocks
        </button>
      </div>
    </header>

    <div class="card controls">
      <div class="input" role="search">
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true" style="width:18px;height:18px;">
          <path d="M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z" stroke="currentColor" stroke-width="2"/>
          <path d="M21 21l-4.3-4.3" stroke="currentColor" stroke-width="2"/>
        </svg>
        <input id="q" type="search" placeholder="Search lessons, projects, keywordsâ€¦" autocomplete="off" />
      </div>
    </div>

    <div id="mount"></div>

    <footer>
      EL 2026
    </footer>
  </div>

  <script>
    /*****************************************************************
     * EDIT ME: Course structure
     *
     * - locked: true/false
     * - password: only required if locked: true
     *****************************************************************/
    const ROADMAP = [
      {
        section: "Setting the scene",
        locked: false,
        items: [
          { title:"Introduction to the Module", desc:"What are we doing here", href:"daily/intro.html" }
        ]
      },
      {
        section: "Getting started",
        locked: false,
        items: [
          { title:"Data Cleaning", desc:"Intro to data cleaning", href:"data_cleaning.html" }
        ]
      },
      {
        section: "Walkthroughs and plotting with R",
        locked: false,
        password: "week2",
        items: [
          { title:"", desc:"", href:"walkthrough/0introtask.html" },
          { title:"", desc:"", href:"walkthrough/linegraphs.html" },
          { title:"", desc:"", href:"walkthrough/scatterplots.html" },
          { title:"", desc:"", href:"walkthrough/boxplots.html" },
          { title:"", desc:"", href:"walkthrough/piecharts.html" },
          { title:"", desc:"", href:"walkthrough/barcharts.html" }
        ]
      },
      {
        section: "RShiny",
        locked: false,
        password: "week2",
        items: [
          { title:"", desc:"", href:"Shiny/notes.html" },
          { title:"", desc:"", href:"Shiny/tasks.html" },
          { title:"", desc:"", href:"Shiny/cheatsheet.html" },
        ]
      },
      {
        section: "Briefs",
        locked: false,
        password: "briefs",
        items: [
          { title:"Available Contract Offers", desc:"Pick a client scenario and build a dashboard", href:"briefs/briefs.html" }
        ]
      },
      {
        section: "Letters of Engagement",
        locked: false,
        password: "briefs",
        items: [
          { title:"", desc:"", href:"briefs/01_task.html" },
          { title:"", desc:"", href:"briefs/02_task.html" },
          { title:"", desc:"", href:"briefs/03_task.html" },
          { title:"", desc:"", href:"briefs/04_task.html" },
          { title:"", desc:"", href:"briefs/05_task.html" },
          { title:"", desc:"", href:"briefs/06_task.html" },
          { title:"", desc:"", href:"briefs/07_task.html", icon:"lcfc"},
          { title:"", desc:"", href:"briefs/08_task.html" }
        ]
      }
    ];

    const UNLOCK_KEY = "unlockedSections.v1";


    function iconForItem(kind){
      
      if(kind === "lcfc") return <img 
          src="assets/lcfc-logo.png"
          alt="Leicester City Football Club crest"
          class="crest"
        />;
      if(kind === "chart") return `<svg>...</svg>`;
      return iconCheck(); // default
    }
    
    function esc(s){
      return String(s ?? "").replace(/[&<>"']/g, m => ({
        "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
      })[m]);
    }

    function loadUnlocked(){
      try{
        return JSON.parse(localStorage.getItem(UNLOCK_KEY)) || {};
      }catch{
        return {};
      }
    }

    function saveUnlocked(obj){
      localStorage.setItem(UNLOCK_KEY, JSON.stringify(obj));
    }

    function iconCheck(){
      return `
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 12.5l4 4L18.5 8" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      `;
    }

    function iconLock(){
      return `
        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M7 11V8a5 5 0 0 1 10 0v3" stroke="currentColor" stroke-width="2"/>
          <path d="M6 11h12v10H6V11Z" stroke="currentColor" stroke-width="2"/>
        </svg>
      `;
    }

    function iconChevron(){
      return `
        <svg class="chev" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      `;
    }

    function matchesQuery(item, q){
      if(!q) return true;
      const hay = [item.title, item.desc].join(" ").toLowerCase();
      return hay.includes(q.toLowerCase());
    }

    function render(){
      const unlocked = loadUnlocked();
      const q = document.getElementById("q").value.trim();
      const mount = document.getElementById("mount");

      mount.innerHTML = ROADMAP.map(sec => {
        const isLocked = !!sec.locked && !unlocked[sec.section];

        const items = (sec.items || []).filter(it => matchesQuery(it, q));

        return `
          <div class="section">
            <div class="sectionHead">
              <h2>${esc(sec.section)}</h2>
              ${isLocked ? `<span class="lockTag">ðŸ”’ Section locked</span>` : ``}
            </div>

            <div class="road">
              ${items.length ? items.map(it => {
                const href = isLocked ? "#" : (it.href || "#");
                const hint = isLocked ? "This section is locked. Click to enter password." : (it.desc || "");
                return `
                  <div class="row">
                    <div class="node ${isLocked ? "locked" : ""}" title="${isLocked ? "Locked" : "Unlocked"}">
                      ${isLocked ? iconLock() : iconForItem(it.icon)}
                    </div>

                    <a class="content ${isLocked ? "disabled" : ""}"
                       href="${esc(href)}"
                       data-section="${esc(sec.section)}"
                       ${isLocked ? 'aria-disabled="true"' : ''}>
                      <div class="left">
                        <div class="title">${esc(it.title)}</div>
                        <div class="desc" title="${esc(hint)}">${esc(it.desc || "")}</div>
                      </div>
                      <div class="right">
                        ${iconChevron()}
                      </div>
                    </a>
                  </div>
                `;
              }).join("") : `<div style="color:var(--muted); padding: 8px 4px;">No matching items.</div>`}
            </div>
          </div>
        `;
      }).join("");

      wireSectionLocks();
    }

    function wireSectionLocks(){
      const unlocked = loadUnlocked();

      document.querySelectorAll(".content.disabled").forEach(link => {
        link.addEventListener("click", (e) => {
          e.preventDefault();

          const sectionName = link.dataset.section;
          const sec = ROADMAP.find(s => s.section === sectionName);
          if(!sec || !sec.locked) return;

          const pw = prompt(`Enter password to unlock "${sectionName}"`);
          if(pw === null) return;

          if(pw === sec.password){
            unlocked[sectionName] = true;
            saveUnlocked(unlocked);
            render();
          } else {
            alert("Incorrect password.");
          }
        });
      });
    }

    document.getElementById("q").addEventListener("input", render);

    document.getElementById("btnClearUnlocks").addEventListener("click", () => {
      localStorage.removeItem(UNLOCK_KEY);
      render();
    });

    render();
  </script>
</body>
</html>
